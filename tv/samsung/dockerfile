FROM --platform=linux/amd64 ubuntu:20.04

ENV DEBIAN_FRONTEND=noninteractive

RUN apt-get update && apt-get install -y \
    python3 \
    python3-pip \
    curl \
    wget \
    unzip \
    openjdk-8-jdk

# Install Python dependencies
RUN pip3 install requests websocket-client

# Install SDB
RUN mkdir -p /opt/tools && cd /opt/tools \
    && wget https://download.tizen.org/sdk/tizenstudio/official/binary/tizen-studio_cli_4.5.1_ubuntu-64.bin \
    && chmod +x tizen-studio_cli_4.5.1_ubuntu-64.bin \
    && ./tizen-studio_cli_4.5.1_ubuntu-64.bin --accept-license --no-java-check -y \
    && ln -s /opt/tools/tizen-studio/tools/sdb /usr/local/bin/sdb

WORKDIR /app
COPY ./login/samsung_tv_api.py /app/
COPY ./login/simple_home_test.py /app/

CMD ["/bin/bash"]